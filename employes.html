<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Employ√©s ‚Äî DKM Customs</title>
    <meta name="description" content="Liste et gestion des employ√©s DKM Customs" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <script src="config.js"></script>
  </head>
  <body>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <aside class="sidebar" id="sidebar">
      <!-- Header: brand + collapse button always visible -->
      <div class="sidebar-header">
        <a class="sidebar-brand" href="#">
          <img src="images/DKM-Logo.png" alt="DKM Logo" style="width:26px;height:26px;object-fit:contain;flex-shrink:0;" />
          <span class="sidebar-brand-text">
            <span class="sidebar-brand-name">DKM Customs</span>
            <span class="sidebar-brand-tag">Administration</span>
          </span>
        </a>
        <button class="sidebar-collapse-top" id="collapseBtn" title="R√©duire">
          &#9664;
        </button>
      </div>

      <nav class="sidebar-nav">
        <span class="nav-section-label">Navigation</span>

        <a href="employes.html" class="nav-item active">
          <span class="nav-icon">üë•</span>
          <span class="nav-label">Employ√©s</span>
        </a>

        <a href="DKM_certifications.html" class="nav-item">
          <span class="nav-icon">üìú</span>
          <span class="nav-label">Attestations</span>
        </a>
      </nav>
    </aside>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="main-wrapper" id="mainWrapper">

      <!-- TOP BAR -->
      <header class="topbar">
        <div class="topbar-left">
          <button class="mobile-menu-btn" id="mobileMenuBtn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
              <line x1="3" y1="6" x2="21" y2="6"/>
              <line x1="3" y1="12" x2="21" y2="12"/>
              <line x1="3" y1="18" x2="21" y2="18"/>
            </svg>
          </button>
          <div>
            <div class="topbar-title">Employ√©s</div>
            <div class="topbar-breadcrumb">
              DKM Customs <span class="sep">‚Ä∫</span> <span>Liste des Employ√©s</span>
            </div>
          </div>
        </div>
        <div class="topbar-right">
          <a href="DKM_certifications.html" class="topbar-btn" title="Attestations">üìú</a>
        </div>
      </header>

      <!-- PAGE CONTENT -->
      <main class="page-content">

        <!-- Page header -->
        <div class="page-header" style="display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:12px;">
          <div>
            <h1 class="page-header-title">Gestion des Employ√©s</h1>
            <p class="page-header-subtitle">Consultez, ajoutez, modifiez et supprimez les employ√©s de votre organisation.</p>
          </div>
          <button class="btn btn-primary btn-lg" onclick="openModal()">
            Ôºã Ajouter un employ√©
          </button>
        </div>

        <!-- Stats row -->
        <div class="stats-row" id="statsRow" style="margin-bottom:24px;">
          <div class="stat-card">
            <div class="stat-icon brand">üë•</div>
            <div class="stat-body">
              <div class="stat-value" id="statTotal">‚Äî</div>
              <div class="stat-label">Total employ√©s</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon success">‚úÖ</div>
            <div class="stat-body">
              <div class="stat-value" id="statCDI">‚Äî</div>
              <div class="stat-label">CDI</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon warning">‚è±Ô∏è</div>
            <div class="stat-body">
              <div class="stat-value" id="statCDD">‚Äî</div>
              <div class="stat-label">CDD</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon info">üìã</div>
            <div class="stat-body">
              <div class="stat-value" id="statOther">‚Äî</div>
              <div class="stat-label">Autre</div>
            </div>
          </div>
        </div>

        <!-- Main data card -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              Liste des Employ√©s
              <span class="card-title-badge" id="countBadge">0</span>
            </div>
            <div class="card-actions">
              <!-- Search -->
              <div class="search-wrapper">
                <span class="search-icon-inline">üîç</span>
                <input
                  type="text"
                  class="search-input"
                  id="searchInput"
                  placeholder="Rechercher un employ√©..."
                  oninput="applyFilters()"
                />
              </div>
              <!-- Filter by contract -->
              <select class="filter-select" id="contractFilter" onchange="applyFilters()">
                <option value="">Tous les contrats</option>
                <option value="CDI">CDI</option>
                <option value="CDD">CDD</option>
              </select>
              <!-- Sort -->
              <select class="filter-select" id="sortSelect" onchange="applyFilters()">
                <option value="name">Nom A‚ÄìZ</option>
                <option value="nameDesc">Nom Z‚ÄìA</option>
                <option value="hireDate">+ R√©cent</option>
                <option value="hireDateAsc">+ Ancien</option>
              </select>
            </div>
          </div>

          <!-- Table -->
          <div class="table-container">
            <!-- Loading skeleton -->
            <div id="loadingState" style="padding:32px;text-align:center;color:var(--gray-400);">
              <div style="font-size:32px;margin-bottom:12px;">‚è≥</div>
              <div style="font-weight:600;color:var(--gray-500);">Chargement des employ√©s...</div>
            </div>

            <!-- Error state -->
            <div id="errorState" style="display:none;padding:24px;">
              <div class="info-box warning">
                <div class="info-box-icon">‚ö†Ô∏è</div>
                <div>
                  <div class="info-box-title">Erreur de connexion</div>
                  <div class="info-box-text" id="errorMsg">V√©rifiez votre connexion et vos cl√©s API Airtable.</div>
                </div>
              </div>
            </div>

            <table class="data-table" id="employeeTable" style="display:none;">
              <thead>
                <tr>
                  <th class="sortable" onclick="sortBy('name')" id="th-name">Nom</th>
                  <th class="sortable" onclick="sortBy('birthDate')" id="th-birthDate">Naissance</th>
                  <th class="sortable" onclick="sortBy('position')" id="th-position">Poste</th>
                  <th class="sortable" onclick="sortBy('hireDate')" id="th-hireDate">Embauche</th>
                  <th>Adresse</th>
                  <th>Contrat</th>
                  <th>CIN</th>
                  <th>N¬∞ SS</th>
                  <th style="text-align:center;">Actions</th>
                </tr>
              </thead>
              <tbody id="employeeTableBody"></tbody>
            </table>
          </div>

          <!-- Pagination -->
          <div class="table-pagination" id="paginationBar" style="display:none;">
            <div class="pagination-info" id="paginationInfo">Affichage de 0 r√©sultats</div>
            <div class="pagination-controls" id="paginationControls"></div>
          </div>
        </div>

      </main>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê EMPLOYEE MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="modal-overlay" id="employeeModal">
      <div class="modal-box" style="max-width:580px;">

        <div class="modal-header">
          <div class="modal-header-title" id="modalTitle">Ajouter un employ√©</div>
          <div class="modal-header-sub">Remplissez les informations ci-dessous</div>
          <button class="modal-close-btn" onclick="closeModal()">‚úï</button>
        </div>

        <div class="modal-body">
          <form id="employeeForm">
            <div class="form-grid">

              <div class="form-group">
                <label class="form-label" for="employeeName">Nom complet <span>*</span></label>
                <input class="form-control" type="text" id="employeeName" name="Name" placeholder="Ex: Youssef Benali" required />
              </div>

              <div class="form-group">
                <label class="form-label" for="employeeBirthDate">Date de naissance <span>*</span></label>
                <input class="form-control" type="date" id="employeeBirthDate" name="BirthDate" required />
              </div>

              <div class="form-group">
                <label class="form-label" for="employeePosition">Poste <span>*</span></label>
                <input class="form-control" type="text" id="employeePosition" name="Position" placeholder="Ex: Responsable logistique" required />
              </div>

              <div class="form-group">
                <label class="form-label" for="employeeHireDate">Date d'embauche <span>*</span></label>
                <input class="form-control" type="date" id="employeeHireDate" name="HireDate" required />
              </div>

              <div class="form-group col-span-full">
                <label class="form-label" for="employeeAddress">Adresse</label>
                <input class="form-control" type="text" id="employeeAddress" name="Address" placeholder="Ex: 12 Rue Mohammed V, Marrakech" />
              </div>

              <div class="form-group">
                <label class="form-label" for="contractType">Type de contrat</label>
                <select class="form-control filter-select" id="contractType" name="Contract type" style="padding:9px 14px;background-size:16px;">
                  <option value="CDI">CDI</option>
                  <option value="CDD">CDD</option>
                  <option value="Int√©rim">Int√©rim</option>
                  <option value="Freelance">Freelance</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label" for="nationalId">CIN (Carte Nationale)</label>
                <input class="form-control" type="text" id="nationalId" name="National ID" placeholder="Ex: AB123456" />
              </div>

              <div class="form-group col-span-full">
                <label class="form-label" for="socialSecurity">N¬∞ S√©curit√© Sociale</label>
                <input class="form-control" type="text" id="socialSecurity" name="Social security number" placeholder="Ex: 00233173900024" />
              </div>

            </div>
          </form>
        </div>

        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeModal()">Annuler</button>
          <button class="btn btn-primary" id="saveBtn" onclick="saveEmployee()">
            üíæ Enregistrer
          </button>
        </div>

      </div>
    </div>

    <!-- Delete confirm modal -->
    <div class="modal-overlay" id="deleteModal">
      <div class="modal-box" style="max-width:420px;">
        <div class="modal-header" style="background:linear-gradient(135deg,#EF4444,#DC2626);">
          <div class="modal-header-title">Confirmer la suppression</div>
          <div class="modal-header-sub">Cette action est irr√©versible</div>
          <button class="modal-close-btn" onclick="document.getElementById('deleteModal').classList.remove('active')">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="info-box warning">
            <div class="info-box-icon">‚ö†Ô∏è</div>
            <div>
              <div class="info-box-title">√ätes-vous certain ?</div>
              <div class="info-box-text">L'employ√© <strong id="deleteEmpName"></strong> sera d√©finitivement supprim√© de la base de donn√©es.</div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="document.getElementById('deleteModal').classList.remove('active')">Annuler</button>
          <button class="btn btn-danger" id="confirmDeleteBtn">üóë Supprimer</button>
        </div>
      </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-box">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">Sauvegarde...</div>
      </div>
    </div>

    <!-- Toast -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
      // ‚îÄ‚îÄ‚îÄ Config (loaded from config.js) ‚îÄ‚îÄ‚îÄ
      const AIRTABLE_API_KEY = window.DKM_CONFIG.AIRTABLE_API_KEY;
      const BASE_ID          = window.DKM_CONFIG.BASE_ID;
      const TABLE_NAME       = window.DKM_CONFIG.TABLE_NAME;
      const BASE_URL         = `https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}`;
      const HEADERS          = { "Authorization": `Bearer ${AIRTABLE_API_KEY}`, "Content-Type": "application/json" };

      // ‚îÄ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ
      let employees         = [];
      let filteredEmployees = [];
      let currentPage       = 1;
      const PAGE_SIZE       = 15;
      let currentEmployeeId = null;
      let sortField         = "name";
      let sortDir           = "asc";

      // ‚îÄ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ
      window.addEventListener("DOMContentLoaded", loadEmployees);

      // ‚îÄ‚îÄ‚îÄ API ‚îÄ‚îÄ‚îÄ
      async function request(url, opts = {}) {
        const r = await fetch(url, { headers: HEADERS, ...opts });
        if (!r.ok) throw new Error(`HTTP ${r.status}`);
        return r.json();
      }

      async function loadEmployees() {
        try {
          document.getElementById("loadingState").style.display  = "block";
          document.getElementById("employeeTable").style.display = "none";
          document.getElementById("errorState").style.display    = "none";
          document.getElementById("paginationBar").style.display = "none";

          const data = await request(`${BASE_URL}?pageSize=100`);
          employees  = (data.records || []).map(r => ({
            id:             r.id,
            name:           r.fields.Name || r.fields["Full Name"] || "‚Äî",
            birthDate:      r.fields.BirthDate || "",
            position:       r.fields.Position  || "‚Äî",
            hireDate:       r.fields.HireDate  || "",
            address:        r.fields.Address   || "",
            contractType:   r.fields["Contract type"] || "",
            nationalId:     r.fields["National ID"]   || "",
            socialSecurity: r.fields["Social security number"] || ""
          }));

          updateStats();
          applyFilters();
          document.getElementById("loadingState").style.display  = "none";
          document.getElementById("employeeTable").style.display = "table";
          document.getElementById("paginationBar").style.display = "flex";

        } catch(e) {
          document.getElementById("loadingState").style.display = "none";
          document.getElementById("errorState").style.display   = "block";
          document.getElementById("errorMsg").textContent       = e.message;
        }
      }

      // ‚îÄ‚îÄ‚îÄ Stats ‚îÄ‚îÄ‚îÄ
      function updateStats() {
        const cdi   = employees.filter(e => e.contractType.toUpperCase() === "CDI").length;
        const cdd   = employees.filter(e => e.contractType.toUpperCase() === "CDD").length;
        const other = employees.length - cdi - cdd;
        document.getElementById("statTotal").textContent = employees.length;
        document.getElementById("statCDI").textContent   = cdi;
        document.getElementById("statCDD").textContent   = cdd;
        document.getElementById("statOther").textContent = other;
      }

      // ‚îÄ‚îÄ‚îÄ Filters & Sort ‚îÄ‚îÄ‚îÄ
      function applyFilters() {
        const q        = document.getElementById("searchInput").value.toLowerCase();
        const contract = document.getElementById("contractFilter").value;
        const sort     = document.getElementById("sortSelect").value;

        filteredEmployees = employees
          .filter(e =>
            (!q || e.name.toLowerCase().includes(q) || e.position.toLowerCase().includes(q) || e.nationalId.toLowerCase().includes(q)) &&
            (!contract || e.contractType === contract)
          )
          .sort((a, b) => {
            let va, vb;
            if (sort === "name")        { va = a.name;     vb = b.name;     return va.localeCompare(vb); }
            if (sort === "nameDesc")    { va = a.name;     vb = b.name;     return vb.localeCompare(va); }
            if (sort === "hireDate")    { va = a.hireDate; vb = b.hireDate; return vb.localeCompare(va); }
            if (sort === "hireDateAsc") { va = a.hireDate; vb = b.hireDate; return va.localeCompare(vb); }
            return 0;
          });

        currentPage = 1;
        renderTable();
        renderPagination();
        document.getElementById("countBadge").textContent = filteredEmployees.length;
      }

      function sortBy(field) {
        const s = document.getElementById("sortSelect");
        if (sortField === field) {
          sortDir = sortDir === "asc" ? "desc" : "asc";
        } else {
          sortField = field;
          sortDir   = "asc";
        }
        applyFilters();
      }

      // ‚îÄ‚îÄ‚îÄ Render table ‚îÄ‚îÄ‚îÄ
      function renderTable() {
        const tbody = document.getElementById("employeeTableBody");
        const start = (currentPage - 1) * PAGE_SIZE;
        const page  = filteredEmployees.slice(start, start + PAGE_SIZE);

        if (!page.length) {
          tbody.innerHTML = `
            <tr>
              <td colspan="9">
                <div class="table-empty">
                  <div class="table-empty-icon">üîç</div>
                  <div class="table-empty-text">Aucun r√©sultat</div>
                  <div class="table-empty-sub">Essayez de modifier vos crit√®res de recherche</div>
                </div>
              </td>
            </tr>`;
          return;
        }

        tbody.innerHTML = page.map(emp => {
          const initials = emp.name.split(" ").map(w => w[0]).join("").substring(0,2).toUpperCase();
          const contractBadge = emp.contractType === "CDI"
            ? `<span class="badge badge-success">${emp.contractType}</span>`
            : emp.contractType === "CDD"
            ? `<span class="badge badge-warning">${emp.contractType}</span>`
            : emp.contractType
            ? `<span class="badge badge-gray">${emp.contractType}</span>`
            : "‚Äî";

          return `
            <tr>
              <td>
                <div class="table-cell-name">
                  <div class="table-avatar">${initials}</div>
                  <div>
                    <div class="table-name-text">${emp.name}</div>
                  </div>
                </div>
              </td>
              <td>${formatDate(emp.birthDate)}</td>
              <td>${emp.position}</td>
              <td>${formatDate(emp.hireDate)}</td>
              <td style="max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="${emp.address}">${emp.address || "‚Äî"}</td>
              <td>${contractBadge}</td>
              <td>${emp.nationalId || "‚Äî"}</td>
              <td>${emp.socialSecurity || "‚Äî"}</td>
              <td>
                <div class="table-actions" style="justify-content:center;">
                  <button class="btn btn-sm btn-ghost" onclick="editEmployee('${emp.id}')" title="Modifier">‚úèÔ∏è</button>
                  <button class="btn btn-sm btn-danger" onclick="confirmDelete('${emp.id}')" title="Supprimer">üóë</button>
                </div>
              </td>
            </tr>`;
        }).join("");
      }

      // ‚îÄ‚îÄ‚îÄ Pagination ‚îÄ‚îÄ‚îÄ
      function renderPagination() {
        const total  = filteredEmployees.length;
        const pages  = Math.ceil(total / PAGE_SIZE);
        const start  = Math.min((currentPage - 1) * PAGE_SIZE + 1, total);
        const end    = Math.min(currentPage * PAGE_SIZE, total);

        document.getElementById("paginationInfo").textContent =
          total > 0 ? `Affichage de ${start}‚Äì${end} sur ${total} employ√©s` : "Aucun r√©sultat";

        const controls = document.getElementById("paginationControls");
        if (pages <= 1) { controls.innerHTML = ""; return; }

        let html = `<button class="page-btn" onclick="gotoPage(${currentPage - 1})" ${currentPage === 1 ? "disabled" : ""}>‚Äπ</button>`;
        for (let p = 1; p <= pages; p++) {
          if (p === 1 || p === pages || Math.abs(p - currentPage) <= 1) {
            html += `<button class="page-btn ${p === currentPage ? 'active' : ''}" onclick="gotoPage(${p})">${p}</button>`;
          } else if (p === 2 || p === pages - 1) {
            html += `<button class="page-btn" disabled>‚Ä¶</button>`;
          }
        }
        html += `<button class="page-btn" onclick="gotoPage(${currentPage + 1})" ${currentPage === pages ? "disabled" : ""}>‚Ä∫</button>`;
        controls.innerHTML = html;
      }

      function gotoPage(p) {
        const pages = Math.ceil(filteredEmployees.length / PAGE_SIZE);
        if (p < 1 || p > pages) return;
        currentPage = p;
        renderTable();
        renderPagination();
      }

      // ‚îÄ‚îÄ‚îÄ Modal ‚îÄ‚îÄ‚îÄ
      function openModal(id = null) {
        currentEmployeeId = id;
        const form = document.getElementById("employeeForm");
        form.reset();

        if (id) {
          const emp = employees.find(e => e.id === id);
          document.getElementById("modalTitle").textContent = "Modifier l'employ√©";
          if (emp) {
            document.getElementById("employeeName").value     = emp.name;
            document.getElementById("employeeBirthDate").value= emp.birthDate;
            document.getElementById("employeePosition").value = emp.position;
            document.getElementById("employeeHireDate").value = emp.hireDate;
            document.getElementById("employeeAddress").value  = emp.address;
            document.getElementById("contractType").value     = emp.contractType;
            document.getElementById("nationalId").value       = emp.nationalId;
            document.getElementById("socialSecurity").value   = emp.socialSecurity;
          }
        } else {
          document.getElementById("modalTitle").textContent = "Ajouter un employ√©";
        }

        document.getElementById("employeeModal").classList.add("active");
      }

      function closeModal() {
        document.getElementById("employeeModal").classList.remove("active");
      }

      // ‚îÄ‚îÄ‚îÄ Save ‚îÄ‚îÄ‚îÄ
      async function saveEmployee() {
        const form   = document.getElementById("employeeForm");
        const fields = Object.fromEntries(new FormData(form));

        if (!fields.Name || !fields.Position) {
          showToast("Nom et poste sont obligatoires", "danger");
          return;
        }

        document.getElementById("loadingOverlay").classList.add("active");
        document.getElementById("loadingText").textContent = currentEmployeeId ? "Mise √† jour..." : "Enregistrement...";

        try {
          if (currentEmployeeId) {
            await request(`${BASE_URL}/${currentEmployeeId}`, {
              method: "PATCH",
              body: JSON.stringify({ fields })
            });
            showToast("Employ√© mis √† jour !", "success");
          } else {
            await request(BASE_URL, {
              method: "POST",
              body: JSON.stringify({ fields })
            });
            showToast("Employ√© ajout√© !", "success");
          }
          closeModal();
          await loadEmployees();
        } catch(e) {
          showToast("Erreur : " + e.message, "danger");
        } finally {
          document.getElementById("loadingOverlay").classList.remove("active");
        }
      }

      function editEmployee(id) { openModal(id); }

      // ‚îÄ‚îÄ‚îÄ Delete ‚îÄ‚îÄ‚îÄ
      function confirmDelete(id) {
        const emp = employees.find(e => e.id === id);
        document.getElementById("deleteEmpName").textContent = emp ? emp.name : "cet employ√©";
        document.getElementById("deleteModal").classList.add("active");
        document.getElementById("confirmDeleteBtn").onclick = () => doDelete(id);
      }

      async function doDelete(id) {
        document.getElementById("deleteModal").classList.remove("active");
        document.getElementById("loadingOverlay").classList.add("active");
        document.getElementById("loadingText").textContent = "Suppression...";
        try {
          await request(`${BASE_URL}/${id}`, { method: "DELETE" });
          showToast("Employ√© supprim√©.", "success");
          await loadEmployees();
        } catch(e) {
          showToast("Erreur : " + e.message, "danger");
        } finally {
          document.getElementById("loadingOverlay").classList.remove("active");
        }
      }

      // ‚îÄ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ‚îÄ
      function formatDate(ds) {
        if (!ds) return "‚Äî";
        return new Date(ds).toLocaleDateString("fr-FR");
      }

      function showToast(msg, type = "") {
        const t = document.createElement("div");
        t.className = `toast ${type}`;
        t.textContent = msg;
        document.getElementById("toastContainer").appendChild(t);
        setTimeout(() => t.remove(), 3500);
      }

      // ‚îÄ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ‚îÄ
      const sidebar       = document.getElementById("sidebar");
      const collapseBtn   = document.getElementById("collapseBtn");
      const mobileMenuBtn = document.getElementById("mobileMenuBtn");
      const overlay       = document.getElementById("sidebarOverlay");

      collapseBtn.addEventListener("click", () => sidebar.classList.toggle("collapsed"));
      mobileMenuBtn.addEventListener("click", () => {
        sidebar.classList.toggle("mobile-open");
        overlay.classList.toggle("active");
      });
      overlay.addEventListener("click", () => {
        sidebar.classList.remove("mobile-open");
        overlay.classList.remove("active");
      });
    </script>
  </body>
</html>
